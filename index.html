<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamTube - AETHER‚Äôs INTRODUCTION</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background-color: #0f0f0f;
            color: white;
            font-family: Roboto, Arial, sans-serif;
            overflow-x: hidden;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f0f0f; 
        }
        ::-webkit-scrollbar-thumb {
            background: #717171; 
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a0a0a0; 
        }
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
            height: 0;
            overflow: hidden;
            border-radius: 12px;
            background-color: #000;
        }
        .video-container video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        /* Animation for interactions */
        .btn-click {
            transform: scale(0.95);
            transition: transform 0.1s;
        }
        /* Toast Notification */
        #toast {
            visibility: hidden;
            min-width: 250px; 
            background-color: #333; 
            color: #fff; 
            text-align: center; 
            border-radius: 8px; 
            padding: 16px; 
            position: fixed; 
            z-index: 100; 
            left: 50%; 
            bottom: 30px; 
            transform: translateX(-50%);
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
        }
        #toast.show {
            visibility: visible;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }
        @keyframes fadein {
            from {bottom: 0; opacity: 0;}
            to {bottom: 30px; opacity: 1;}
        }
        @keyframes fadeout {
            from {bottom: 30px; opacity: 1;}
            to {bottom: 0; opacity: 0;}
        }
    </style>
</head>
<body>

    <!-- Toast Notification -->
    <div id="toast">Action Completed</div>

    <!-- Sidebar Overlay (Hidden by default) -->
    <div id="sidebarOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden" onclick="toggleSidebar()"></div>
    <div id="sidebar" class="fixed top-14 left-0 bottom-0 w-60 bg-[#0f0f0f] z-50 transform -translate-x-full transition-transform duration-300 overflow-y-auto p-3 border-r border-[#303030]">
        <div class="space-y-2">
            <button class="w-full flex items-center gap-4 px-3 py-2 hover:bg-[#272727] rounded-lg text-sm"><i class="fa-solid fa-house text-lg w-6"></i> Home</button>
            <button class="w-full flex items-center gap-4 px-3 py-2 hover:bg-[#272727] rounded-lg text-sm"><i class="fa-solid fa-compass text-lg w-6"></i> Shorts</button>
            <button class="w-full flex items-center gap-4 px-3 py-2 hover:bg-[#272727] rounded-lg text-sm"><i class="fa-solid fa-play-circle text-lg w-6"></i> Subscriptions</button>
            <div class="border-t border-[#303030] my-2"></div>
            <button class="w-full flex items-center gap-4 px-3 py-2 hover:bg-[#272727] rounded-lg text-sm"><i class="fa-solid fa-clock-rotate-left text-lg w-6"></i> History</button>
            <button class="w-full flex items-center gap-4 px-3 py-2 hover:bg-[#272727] rounded-lg text-sm"><i class="fa-solid fa-list-ul text-lg w-6"></i> Playlists</button>
            <button class="w-full flex items-center gap-4 px-3 py-2 hover:bg-[#272727] rounded-lg text-sm"><i class="fa-solid fa-video text-lg w-6"></i> Your Videos</button>
            <button class="w-full flex items-center gap-4 px-3 py-2 hover:bg-[#272727] rounded-lg text-sm"><i class="fa-solid fa-clock text-lg w-6"></i> Watch Later</button>
            <button class="w-full flex items-center gap-4 px-3 py-2 hover:bg-[#272727] rounded-lg text-sm"><i class="fa-solid fa-thumbs-up text-lg w-6"></i> Liked Videos</button>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="shareModal" class="fixed inset-0 flex items-center justify-center z-[60] hidden">
        <div class="absolute inset-0 bg-black bg-opacity-70" onclick="toggleShare()"></div>
        <div class="bg-[#212121] p-6 rounded-xl w-[90%] max-w-md relative z-10 shadow-2xl">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold">Share</h3>
                <button onclick="toggleShare()" class="text-gray-400 hover:text-white"><i class="fa-solid fa-xmark text-xl"></i></button>
            </div>
            <div class="flex gap-4 justify-center mb-6 overflow-x-auto py-2">
                <button class="flex flex-col items-center gap-2 min-w-[60px]" onclick="showToast('Shared to WhatsApp')">
                    <div class="w-12 h-12 rounded-full bg-green-500 flex items-center justify-center text-2xl"><i class="fa-brands fa-whatsapp"></i></div>
                    <span class="text-xs">WhatsApp</span>
                </button>
                <button class="flex flex-col items-center gap-2 min-w-[60px]" onclick="showToast('Shared to Facebook')">
                    <div class="w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center text-2xl"><i class="fa-brands fa-facebook-f"></i></div>
                    <span class="text-xs">Facebook</span>
                </button>
                <button class="flex flex-col items-center gap-2 min-w-[60px]" onclick="showToast('Shared to X')">
                    <div class="w-12 h-12 rounded-full bg-black border border-gray-600 flex items-center justify-center text-xl"><i class="fa-brands fa-x-twitter"></i></div>
                    <span class="text-xs">X</span>
                </button>
                <button class="flex flex-col items-center gap-2 min-w-[60px]" onclick="showToast('Shared via Email')">
                    <div class="w-12 h-12 rounded-full bg-gray-500 flex items-center justify-center text-xl"><i class="fa-solid fa-envelope"></i></div>
                    <span class="text-xs">Email</span>
                </button>
            </div>
            <div class="bg-[#181818] border border-[#303030] rounded-lg p-2 flex items-center justify-between">
                <input type="text" value="https://streamtube.com/watch?v=_3hyK1OmK0I" readonly class="bg-transparent text-sm w-full outline-none text-gray-400">
                <button class="bg-blue-500 text-black text-sm font-medium px-3 py-1.5 rounded-full hover:bg-blue-400" onclick="copyLink()">Copy</button>
            </div>
        </div>
    </div>

    <!-- Navigation Bar -->
    <nav class="fixed top-0 left-0 right-0 h-14 bg-[#0f0f0f] flex items-center justify-between px-4 z-50 border-b border-[#272727]">
        <!-- Left: Menu & Logo -->
        <div class="flex items-center gap-4">
            <button class="p-2 hover:bg-[#272727] rounded-full w-10 h-10 flex items-center justify-center" onclick="toggleSidebar()">
                <i class="fa-solid fa-bars text-xl"></i>
            </button>
            <div class="flex items-center gap-1 cursor-pointer" onclick="window.location.reload()">
                <div class="bg-red-600 text-white p-1 rounded-lg">
                    <i class="fa-brands fa-youtube text-xl"></i>
                </div>
                <span class="text-xl font-bold tracking-tighter">StreamTube</span>
            </div>
        </div>

        <!-- Center: Search -->
        <div class="hidden md:flex items-center w-1/2 max-w-[600px]">
            <div class="flex w-full">
                <input type="text" id="searchInput" placeholder="Search" class="w-full bg-[#121212] border border-[#303030] rounded-l-full px-4 py-2 focus:outline-none focus:border-blue-500 shadow-inner text-gray-200" onkeypress="handleSearch(event)">
                <button class="bg-[#222222] border border-l-0 border-[#303030] px-5 rounded-r-full hover:bg-[#272727]" onclick="showToast('Search functionality simulated')">
                    <i class="fa-solid fa-magnifying-glass text-gray-400"></i>
                </button>
            </div>
            <button class="ml-4 p-2 bg-[#181818] hover:bg-[#272727] rounded-full w-10 h-10 flex items-center justify-center" onclick="startVoiceSearch()">
                <i class="fa-solid fa-microphone" id="micIcon"></i>
            </button>
        </div>

        <!-- Right: Icons & Profile -->
        <div class="flex items-center gap-3">
            <button class="hidden sm:block p-2 hover:bg-[#272727] rounded-full w-10 h-10" onclick="showToast('Create video clicked')"><i class="fa-solid fa-video"></i></button>
            <button class="hidden sm:block p-2 hover:bg-[#272727] rounded-full w-10 h-10 relative" onclick="toggleNotifications()">
                <i class="fa-regular fa-bell"></i>
                <span class="absolute top-1 right-1 bg-red-600 text-white text-[10px] font-bold px-1 rounded-full">9+</span>
            </button>
            <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center text-sm font-bold cursor-pointer hover:opacity-90" onclick="showToast('Opening Profile...')">U</div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="pt-16 px-4 md:px-6 lg:px-12 max-w-[1800px] mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6">
        
        <!-- Left Column: Video & Comments -->
        <div class="lg:col-span-2">
            
            <!-- Video Player -->
            <div class="video-container shadow-lg group">
                <video id="mainVideo" controls autoplay poster="https://img.youtube.com/vi/_3hyK1OmK0I/maxresdefault.jpg" class="w-full h-full">
                    <source src="https://files.catbox.moe/xv8sgh.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>

            <!-- Video Title -->
            <h1 class="text-xl font-bold mt-4">AETHER‚Äôs INTRODUCTION | Full Documentary [4K]</h1>

            <!-- Channel & Actions Bar -->
            <div class="flex flex-col sm:flex-row sm:items-center justify-between mt-2 pb-4 border-b border-[#303030] gap-4">
                
                <!-- Channel Info -->
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-tr from-orange-500 to-yellow-400 rounded-full flex items-center justify-center text-white font-bold text-lg cursor-pointer">
                        A
                    </div>
                    <div>
                        <h3 class="font-bold text-base cursor-pointer hover:text-gray-300">Aether <i class="fa-solid fa-circle-check text-gray-400 text-xs ml-1"></i></h3>
                        <p class="text-gray-400 text-xs">12.5M subscribers</p>
                    </div>
                    <button id="subBtn" class="ml-4 bg-white text-black px-4 py-2 rounded-full font-medium hover:bg-gray-200 transition-colors" onclick="toggleSubscribe()">
                        Subscribe
                    </button>
                </div>

                <!-- Action Buttons -->
                <div class="flex items-center gap-2 overflow-x-auto no-scrollbar">
                    <div class="flex items-center bg-[#272727] rounded-full">
                        <button id="likeBtn" class="flex items-center gap-2 px-4 py-2 hover:bg-[#3f3f3f] rounded-l-full border-r border-[#3f3f3f] transition-colors" onclick="handleLike()">
                            <i class="fa-regular fa-thumbs-up text-lg"></i> <span id="likeCount">3.2M</span>
                        </button>
                        <button id="dislikeBtn" class="px-4 py-2 hover:bg-[#3f3f3f] rounded-r-full transition-colors" onclick="handleDislike()">
                            <i class="fa-regular fa-thumbs-down text-lg"></i>
                        </button>
                    </div>
                    <button class="flex items-center gap-2 bg-[#272727] px-4 py-2 rounded-full hover:bg-[#3f3f3f] font-medium text-sm transition-colors" onclick="toggleShare()">
                        <i class="fa-solid fa-share"></i> Share
                    </button>
                    <button class="flex items-center gap-2 bg-[#272727] px-4 py-2 rounded-full hover:bg-[#3f3f3f] font-medium text-sm transition-colors" onclick="handleDownload()">
                        <i class="fa-solid fa-download"></i> Download
                    </button>
                    <button class="flex items-center justify-center bg-[#272727] w-9 h-9 rounded-full hover:bg-[#3f3f3f] transition-colors" onclick="showToast('More options menu')">
                        <i class="fa-solid fa-ellipsis"></i>
                    </button>
                </div>
            </div>

            <!-- Description Box -->
            <div id="descBox" class="bg-[#272727] rounded-xl p-3 mt-4 text-sm hover:bg-[#3f3f3f] cursor-pointer transition-colors group" onclick="toggleDescription()">
                <div class="font-bold mb-1">24,892,105 views ‚Ä¢ Premiered Feb 2, 2026</div>
                <div id="descText" class="line-clamp-2">
                    <p class="text-white group-hover:text-white">
                        Breaking news: All flights to Vietnam's major capitals are sold out! People are traveling to experience unique Vietnamese culture popularized by Aether. Spending life in a van, connecting culture by sharing unique traditions through traveling. Welcome to Aether's journey.
                        <br><br>
                        This journey has been 5 years in the making. We traveled across 63 provinces, met thousands of amazing people, and discovered the hidden heart of Vietnam.
                        <br><br>
                        Special thanks to our sponsors and the incredible community that made this possible.
                        <br><br>
                        <span class="text-blue-400">#Aether #Vietnam #VanLife #Travel #Culture #Documentary #Trending</span>
                    </p>
                </div>
                <span id="showMoreBtn" class="font-bold text-white cursor-pointer mt-1 block">...more</span>
            </div>

            <!-- Comments Section -->
            <div class="mt-6">
                <div class="flex items-center gap-6 mb-6">
                    <h2 class="text-xl font-bold"><span id="totalCommentCount">142,508</span> Comments</h2>
                    <div class="flex items-center gap-2 text-sm font-medium cursor-pointer text-gray-300 hover:text-white" onclick="showToast('Sort menu opened')">
                        <i class="fa-solid fa-arrow-down-short-wide"></i> Sort by
                    </div>
                </div>

                <!-- Add Comment Input -->
                <div class="flex gap-4 mb-8">
                    <div class="w-10 h-10 bg-purple-600 rounded-full flex-shrink-0 flex items-center justify-center text-sm font-bold">U</div>
                    <div class="flex-grow">
                        <input type="text" id="commentInput" placeholder="Add a comment..." class="w-full bg-transparent border-b border-[#303030] focus:border-white focus:outline-none pb-1 transition-colors text-sm" onfocus="document.getElementById('commentActions').classList.remove('hidden')">
                        <div id="commentActions" class="flex justify-between items-center mt-2 hidden">
                            <button class="text-gray-400 hover:text-white text-lg"><i class="fa-regular fa-face-smile"></i></button>
                            <div class="flex gap-2">
                                <button class="px-3 py-2 rounded-full hover:bg-[#272727] text-sm font-medium" onclick="cancelComment()">Cancel</button>
                                <button class="px-3 py-2 bg-blue-500 text-black font-medium rounded-full text-sm hover:bg-blue-400 disabled:bg-[#272727] disabled:text-gray-500" onclick="addComment()">Comment</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Comments List -->
                <div id="commentsList" class="space-y-6 pb-10">
                    <!-- Dynamic comments will be injected here -->
                </div>
                
                <!-- Loading Spinner for Infinite Scroll feel -->
                <div class="flex justify-center py-4">
                    <div class="w-8 h-8 border-4 border-[#303030] border-t-blue-500 rounded-full animate-spin"></div>
                </div>
            </div>
        </div>

        <!-- Right Column: Sidebar Recommendations -->
        <div class="lg:col-span-1 pl-0 lg:pl-4 mt-8 lg:mt-0">
            <!-- Filter Chips -->
            <div class="flex gap-2 overflow-x-auto pb-4 no-scrollbar mb-2">
                <button class="bg-white text-black px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap hover:bg-gray-200 transition-colors" onclick="filterVideos('all')">All</button>
                <button class="bg-[#272727] hover:bg-[#3f3f3f] px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap transition-colors" onclick="filterVideos('channel')">From Aether</button>
                <button class="bg-[#272727] hover:bg-[#3f3f3f] px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap transition-colors" onclick="filterVideos('related')">Related</button>
                <button class="bg-[#272727] hover:bg-[#3f3f3f] px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap transition-colors" onclick="filterVideos('recent')">Recently Uploaded</button>
            </div>

            <!-- Video List -->
            <div class="flex flex-col gap-3" id="recommendationList">
                <!-- Rec Video 1 -->
                <div class="flex gap-2 cursor-pointer group">
                    <div class="relative w-40 h-24 rounded-lg bg-gray-800 flex-shrink-0 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1528127269322-539801943592?w=400&q=80" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-200" alt="Thumbnail">
                        <span class="absolute bottom-1 right-1 bg-black bg-opacity-80 text-xs px-1 rounded">12:30</span>
                    </div>
                    <div>
                        <h4 class="font-bold text-sm line-clamp-2 leading-tight mb-1 group-hover:text-blue-400">Street Food Tour in Hanoi üçú</h4>
                        <div class="text-xs text-gray-400">Vietnam Eats <i class="fa-solid fa-circle-check text-[10px]"></i></div>
                        <div class="text-xs text-gray-400">2.4M views ‚Ä¢ 1 month ago</div>
                    </div>
                </div>

                <!-- Rec Video 2 -->
                <div class="flex gap-2 cursor-pointer group">
                    <div class="relative w-40 h-24 rounded-lg bg-gray-800 flex-shrink-0 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1504280390367-361c6d9f38f4?w=400&q=80" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-200" alt="Thumbnail">
                        <span class="absolute bottom-1 right-1 bg-black bg-opacity-80 text-xs px-1 rounded">18:45</span>
                    </div>
                    <div>
                        <h4 class="font-bold text-sm line-clamp-2 leading-tight mb-1 group-hover:text-blue-400">Why Van Life is Harder Than You Think</h4>
                        <div class="text-xs text-gray-400">Nomad Diaries</div>
                        <div class="text-xs text-gray-400">5.1M views ‚Ä¢ 2 years ago</div>
                    </div>
                </div>

                <!-- Rec Video 3 -->
                <div class="flex gap-2 cursor-pointer group">
                    <div class="relative w-40 h-24 rounded-lg bg-gray-800 flex-shrink-0 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1552083375-1447ce886485?w=400&q=80" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-200" alt="Thumbnail">
                        <span class="absolute bottom-1 right-1 bg-black bg-opacity-80 text-xs px-1 rounded">8:15</span>
                    </div>
                    <div>
                        <h4 class="font-bold text-sm line-clamp-2 leading-tight mb-1 group-hover:text-blue-400">Top 10 Hidden Gems in Vietnam</h4>
                        <div class="text-xs text-gray-400">Travel Guide</div>
                        <div class="text-xs text-gray-400">850K views ‚Ä¢ 3 weeks ago</div>
                    </div>
                </div>

                 <!-- Rec Video 4 -->
                 <div class="flex gap-2 cursor-pointer group">
                    <div class="relative w-40 h-24 rounded-lg bg-gray-800 flex-shrink-0 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?w=400&q=80" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-200" alt="Thumbnail">
                        <span class="absolute bottom-1 right-1 bg-black bg-opacity-80 text-xs px-1 rounded">15:20</span>
                    </div>
                    <div>
                        <h4 class="font-bold text-sm line-clamp-2 leading-tight mb-1 group-hover:text-blue-400">Backpacking Southeast Asia: The Budget</h4>
                        <div class="text-xs text-gray-400">Budget Traveler</div>
                        <div class="text-xs text-gray-400">1.2M views ‚Ä¢ 8 months ago</div>
                    </div>
                </div>
                
                 <!-- Rec Video 5 -->
                 <div class="flex gap-2 cursor-pointer group">
                    <div class="relative w-40 h-24 rounded-lg bg-gray-800 flex-shrink-0 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1516483638261-f4dbaf036963?w=400&q=80" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-200" alt="Thumbnail">
                        <span class="absolute bottom-1 right-1 bg-black bg-opacity-80 text-xs px-1 rounded">22:05</span>
                    </div>
                    <div>
                        <h4 class="font-bold text-sm line-clamp-2 leading-tight mb-1 group-hover:text-blue-400">Exploring Cinque Terre, Italy üáÆüáπ</h4>
                        <div class="text-xs text-gray-400">Wanderlust World</div>
                        <div class="text-xs text-gray-400">3.4M views ‚Ä¢ 1 year ago</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA & STATE ---
        let isSubscribed = false;
        let likeCount = 3200000;
        let isLiked = false;
        let isDisliked = false;
        let isDescExpanded = false;

        const fakeNames = ["ShadowHunter", "PixelQueen", "NomadLife", "VietnamLover", "TechGeek99", "Sarah J.", "MikeTheBike", "CoffeeAddict", "WanderLust", "CodeMaster", "TravelBug", "SkyWalker", "OceanEyes", "CityLights", "MountainMan"];
        const fakeComments = [
            "This is absolutely the best travel documentary I've seen this year! üî•",
            "I'm booking my ticket to Vietnam right now. Seriously.",
            "The production quality is insane! Aether never misses.",
            "Who else is watching this in 2026? üëá",
            "Vietnam is such a beautiful country. Love from Brazil! üáßüá∑",
            "That drone shot at 1:15 was pure magic. How did you even get that?",
            "Can we appreciate how much effort went into this edit? üëè",
            "I've been following you since 10k subs, so proud to see you at 12M!",
            "First time watching your channel and I subscribed immediately.",
            "The food looks so delicious, I'm getting hungry at 2 AM.",
            "Finally a video that shows the real culture, not just tourist traps.",
            "Legendary content as always.",
            "My dream is to buy a van and travel like this one day.",
            "Greetings from Germany! üá©üá™",
            "Underrated channel? Not anymore! 12.5M well deserved.",
            "The storytelling is on another level.",
            "I watched this 3 times already.",
            "Please visit Japan next! üáØüáµ",
            "The music choice fits the vibe perfectly.",
            "Wait, did anyone else notice the cat in the background at 0:45? üòπ"
        ];

        // --- INITIALIZATION ---
        window.onload = function() {
            generateComments(50); // Generate 50 initial comments
            // Start a subtle view counter update
            setInterval(() => {
                const viewCount = document.querySelector('.bg-\\[\\#272727\\] .font-bold');
                // Just a random chance to 'update' views for realism
                if(Math.random() > 0.7) {
                    // Logic to simulate live view count not implemented for text string parsing simplicity
                    // But effectively simulates a live page
                }
            }, 5000);
        };

        // --- COMMENT GENERATION ---
        function generateComments(count) {
            const list = document.getElementById('commentsList');
            let html = '';
            for (let i = 0; i < count; i++) {
                const name = fakeNames[Math.floor(Math.random() * fakeNames.length)];
                const text = fakeComments[Math.floor(Math.random() * fakeComments.length)];
                const color = getRandomColor();
                const likes = Math.floor(Math.random() * 5000) + 12;
                const time = Math.floor(Math.random() * 23) + 1 + " hours ago";
                
                html += `
                    <div class="flex gap-4">
                        <div class="w-10 h-10 rounded-full ${color} flex-shrink-0 flex items-center justify-center font-bold text-white text-lg">${name.charAt(0)}</div>
                        <div>
                            <div class="flex items-center gap-2 mb-1">
                                <span class="font-bold text-sm bg-clip-text text-transparent bg-gradient-to-r from-gray-100 to-gray-400">${name}</span>
                                <span class="text-xs text-gray-400">${time}</span>
                            </div>
                            <p class="text-sm text-gray-200">${text}</p>
                            <div class="flex items-center gap-4 mt-2">
                                <button class="flex items-center gap-1 text-xs text-gray-400 hover:text-white transition-colors" onclick="toggleCommentLike(this)">
                                    <i class="fa-regular fa-thumbs-up text-sm"></i> <span>${formatCount(likes)}</span>
                                </button>
                                <button class="text-xs text-gray-400 hover:text-white transition-colors" onclick="toggleCommentDislike(this)">
                                    <i class="fa-regular fa-thumbs-down text-sm"></i>
                                </button>
                                <button class="text-xs font-medium text-gray-400 hover:text-white">Reply</button>
                            </div>
                        </div>
                    </div>
                `;
            }
            list.innerHTML += html;
        }

        function getRandomColor() {
            const colors = ['bg-red-500', 'bg-blue-500', 'bg-green-500', 'bg-yellow-500', 'bg-purple-500', 'bg-pink-500', 'bg-indigo-500', 'bg-teal-500'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // --- INTERACTION HANDLERS ---

        // Sidebar
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            
            if (sidebar.classList.contains('-translate-x-full')) {
                sidebar.classList.remove('-translate-x-full');
                overlay.classList.remove('hidden');
            } else {
                sidebar.classList.add('-translate-x-full');
                overlay.classList.add('hidden');
            }
        }

        // Subscribe
        function toggleSubscribe() {
            const btn = document.getElementById('subBtn');
            isSubscribed = !isSubscribed;
            
            if (isSubscribed) {
                btn.innerText = 'Subscribed';
                btn.className = 'ml-4 bg-[#272727] text-white px-4 py-2 rounded-full font-medium hover:bg-[#3f3f3f] transition-colors btn-click';
                showToast('Subscription added');
            } else {
                btn.innerText = 'Subscribe';
                btn.className = 'ml-4 bg-white text-black px-4 py-2 rounded-full font-medium hover:bg-gray-200 transition-colors btn-click';
                showToast('Subscription removed');
            }
            setTimeout(() => btn.classList.remove('btn-click'), 150);
        }

        // Like Main Video
        function handleLike() {
            const likeBtn = document.getElementById('likeBtn');
            const icon = likeBtn.querySelector('i');
            const countSpan = document.getElementById('likeCount');

            if (isLiked) {
                isLiked = false;
                likeCount--;
                icon.className = 'fa-regular fa-thumbs-up text-lg';
            } else {
                if (isDisliked) handleDislike(); 
                isLiked = true;
                likeCount++;
                icon.className = 'fa-solid fa-thumbs-up text-lg text-white';
                showToast('Added to Liked Videos');
            }
            countSpan.innerText = formatCount(likeCount);
        }

        // Dislike Main Video
        function handleDislike() {
            const dislikeBtn = document.getElementById('dislikeBtn');
            const icon = dislikeBtn.querySelector('i');

            if (isDisliked) {
                isDisliked = false;
                icon.className = 'fa-regular fa-thumbs-down text-lg';
            } else {
                if (isLiked) handleLike();
                isDisliked = true;
                icon.className = 'fa-solid fa-thumbs-down text-lg text-white';
                showToast('Dislike registered');
            }
        }

        // Description Toggle
        function toggleDescription() {
            const descText = document.getElementById('descText');
            const btn = document.getElementById('showMoreBtn');
            
            if (isDescExpanded) {
                descText.className = 'line-clamp-2';
                btn.innerText = '...more';
            } else {
                descText.className = '';
                btn.innerText = 'Show less';
            }
            isDescExpanded = !isDescExpanded;
        }

        // Comment Like/Dislike
        function toggleCommentLike(btn) {
            const icon = btn.querySelector('i');
            if (icon.classList.contains('fa-regular')) {
                icon.classList.remove('fa-regular');
                icon.classList.add('fa-solid');
                btn.classList.add('text-blue-400');
            } else {
                icon.classList.add('fa-regular');
                icon.classList.remove('fa-solid');
                btn.classList.remove('text-blue-400');
            }
        }
        
        function toggleCommentDislike(btn) {
            const icon = btn.querySelector('i');
            if (icon.classList.contains('fa-regular')) {
                icon.classList.remove('fa-regular');
                icon.classList.add('fa-solid');
                btn.classList.add('text-red-400');
            } else {
                icon.classList.add('fa-regular');
                icon.classList.remove('fa-solid');
                btn.classList.remove('text-red-400');
            }
        }

        // Add Comment
        function addComment() {
            const input = document.getElementById('commentInput');
            const text = input.value.trim();
            if (text === "") return;

            const list = document.getElementById('commentsList');
            const newComment = document.createElement('div');
            newComment.className = 'flex gap-4 animate-fade-in bg-[#1a1a1a] p-3 rounded-lg border border-[#303030] mb-2';
            newComment.innerHTML = `
                <div class="w-10 h-10 bg-purple-600 rounded-full flex-shrink-0 flex items-center justify-center text-sm font-bold">U</div>
                <div class="flex-grow">
                     <div class="flex items-center gap-2 mb-1">
                        <span class="font-bold text-sm">You</span>
                        <span class="text-xs text-gray-400">Just now</span>
                    </div>
                    <p class="text-sm">${escapeHtml(text)}</p>
                    <div class="flex items-center gap-4 mt-2">
                        <button class="flex items-center gap-1 text-xs text-gray-400 hover:text-white" onclick="toggleCommentLike(this)"><i class="fa-regular fa-thumbs-up text-sm"></i> 0</button>
                        <button class="text-xs text-gray-400 hover:text-white" onclick="toggleCommentDislike(this)"><i class="fa-regular fa-thumbs-down text-sm"></i></button>
                        <button class="text-xs font-medium text-gray-400 hover:text-white">Reply</button>
                        <button class="text-xs font-medium text-gray-400 hover:text-white" onclick="this.closest('.flex.gap-4').remove()">Delete</button>
                    </div>
                </div>
            `;
            list.prepend(newComment);
            input.value = "";
            cancelComment();
            showToast('Comment added');
            
            // Update huge count
            const countEl = document.getElementById('totalCommentCount');
            let current = parseInt(countEl.innerText.replace(/,/g, ''));
            countEl.innerText = (current + 1).toLocaleString();
        }

        function cancelComment() {
            document.getElementById('commentInput').value = '';
            document.getElementById('commentActions').classList.add('hidden');
        }

        // Share & Download
        function toggleShare() {
            const modal = document.getElementById('shareModal');
            modal.classList.toggle('hidden');
        }

        function copyLink() {
            const input = document.querySelector('#shareModal input');
            input.select();
            document.execCommand('copy');
            showToast('Link copied to clipboard');
            setTimeout(toggleShare, 500);
        }

        function handleDownload() {
            showToast('Premium Required to Download');
        }
        
        function toggleNotifications() {
             showToast('Notifications settings updated');
        }

        // Search
        function handleSearch(e) {
            if (e.key === 'Enter') {
                showToast(`Searching for "${e.target.value}"...`);
            }
        }
        
        function startVoiceSearch() {
            const icon = document.getElementById('micIcon');
            icon.classList.add('text-red-500', 'animate-pulse');
            showToast('Listening...');
            setTimeout(() => {
                icon.classList.remove('text-red-500', 'animate-pulse');
            }, 2000);
        }

        // Filter Chips
        function filterVideos(type) {
            showToast(`Filtering by: ${type}`);
            const list = document.getElementById('recommendationList');
            list.style.opacity = '0.5';
            setTimeout(() => {
                list.style.opacity = '1';
            }, 300);
        }

        // Utilities
        function formatCount(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            }
            if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num;
        }

        function showToast(message) {
            const toast = document.getElementById("toast");
            toast.innerText = message;
            toast.className = "show";
            setTimeout(function(){ toast.className = toast.className.replace("show", ""); }, 3000);
        }

        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, function(m) { return map[m]; });
        }
    </script>
</body>
</html>
